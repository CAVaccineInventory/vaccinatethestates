<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>
    {%if page.title == nil %}{{site.title}}{%else%}{% t page.title %} | {{
    site.title }} {%endif%}
  </title>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <meta property="og:title" content="{% t page.title %}" />
  <meta
    property="og:locale"
    content="{{ page.lang | default: site.lang | default: 'en' }}"
  />
  <meta name="description" content="{% t site_description %}" />
  <meta property="og:description" content="{% t site_description %}" />
  <link
    rel="canonical"
    href="{{ site.url }}{% if site.lang != 'en' %}/{{ site.lang }}{% endif %}{{ page.url }}"
  />
  <meta
    property="og:url"
    content="{{ site.url }}{% if site.lang != 'en' %}/{{ site.lang }}{% endif %}{{ page.url }}"
  />
  <meta property="og:site_name" content="{{ site.title }}" />

  <!-- TODO: switch twitter to summary_large_image once we get card image assets. add twitter:image -->
  {%if site.twitter != nil %}
  <meta name="twitter:card" content="summary" />
  <meta property="twitter:title" content="{% t page.title %}" />
  <meta name="twitter:site" content="@{{site.twitter}}" />
  {%endif%}

  <!-- TODO: missing image field (no card image asset), sameAs (unknown) -->
  <script type="application/ld+json">
    {
      "description": "{% t site_description %}",
      "publisher": {
        "@type": "Organization",
        "logo": {
          "@type": "ImageObject",
          "url": "{{ site.url }}/assets/img/logo.png"
        }
      },
      "@type": "WebSite",
      "headline": "{% t page.title %}",
      "url": "{{ site.url }}{% if site.lang != 'en' %}/{{ site.lang }}{% endif %}{{ page.url }}",
      "name": "{{ site.title }}",
      "@context": "https://schema.org"
    }
  </script>

  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"></script>
  <link
    rel="stylesheet"
    href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"
    type="text/css"
  />

  <link href="/assets/css/main.css" rel="stylesheet" />
  <script src="/assets/js/main.js"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap"
    rel="stylesheet"
  />

  {% if jekyll.environment == 'production' %}
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id={{site.google_analytics_id}}"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "{{site.google_analytics_id}}");
  </script>
  {% endif %}
</head>
